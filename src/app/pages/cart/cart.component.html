<section class="relative min-h-screen ">
    
    @if (cardDetails.totalCartPrice) {
    
        <section class="bg-slate-100 rounded border p-10 w-[70%] mx-auto shadow my-10">
            <h1 class="text-center text-green-600 text-3xl font-bold mb-3">Shop Cart</h1>
            <div class="flex items-center justify-between">
    
                <span class="text-2xl mb-6">Total cart Price : {{cardDetails.totalCartPrice| currency:'GBP'}} </span>
                <button class="text-xs font-bold hover:text-red-600 " (click)="togglehidden()"><i class="fa-solid fa-broom text-lg text-red-500" ></i> Clear Cart</button>
            </div>
            @for (item of cardDetails.products; track item._id) {
            <div class="grid grid-cols-1 md:grid-cols-[20%_80%] my-6 ">
                <div class=" px-3 mb-2">
                    <img [src]="item.product.imageCover" class="w-full object-contain md:h-[100px] h-[75px]" alt="">
                </div>
        
        
                <div class="flex justify-between">
                    <div>
                        <h3 class="md:text-xl text-green-800 text-sm mb-3">{{item.product.title}}</h3>
                        <h4 class="text-lg text-green-700 mb-3"> price: {{item.price | currency:"GBP"}}</h4>
                        <button><i class="fa-solid fa-trash-can text-red-500" (click)="removeItemFromCart(item.product._id)"></i> Remove</button>
        
        
                    </div>
                    <div class="flex  justify-between px-3 items-center border-2 border-yellow-400 rounded-full w-[20%] h-[40%]">
                        <button (click)="countUpdater(item.product._id , item.count+1)" class= "border-e-yellow-400 border-e ">
        
                            <i class="fa-solid fa-plus text-green-500 hover:text-green-800 px-2  font-bold text-xl"></i>
                        </button>
                        
        
                        <span class="mx-4">{{item.count}}</span>
        
                        <button (click)="countUpdater(item.product._id, item.count-1)" class="border-s-yellow-400 border-s "> <i class=" font-bold text-xl fa-solid fa-minus text-green-500 hover:text-green-800 px-2"></i></button>
                    </div>
                </div>
        
        
            </div>
            <hr class="bg-black w-full">
            }
        
            <button class="bg-slate-500 p-3 rounded-3xl text-white hover:bg-slate-700 mt-2 block mx-auto" [routerLink]="['/checkout', cardDetails._id]">Check Out</button>
        
        
        </section>
    }
    
    @else {
        
        <div class="my-12">
            <h1 class="text-center italic text-green-800 text-3xl">Your Cart is currently Empty! </h1>
    
            <img src="images/pngwing.com.png" class="w-full object-contain h-[450px]" alt="">
        </div>
    }
    
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50" 
         [class.hidden]="hidden">
        <div class="w-11/12 md:w-1/2 bg-white rounded-lg shadow-lg">
            <div class="p-5">
                <div class="flex justify-end">
                    <button class="hover:text-red-600 transition-colors" 
                            (click)="togglehidden()">
                        <i class="fa-solid fa-xmark p-2"></i>
                    </button>
                </div>
                
                <hr class="my-4">
                
                <div class="my-5">
                    <p class="text-center font-bold text-2xl">
                        Are you sure you want to clear your cart?
                    </p>
                </div>
                
                <hr class="my-4">
                
                <div class="flex justify-center my-5">
                    <button class="border-2 border-red-500 px-6 py-2 rounded-xl 
                                 hover:bg-red-500 hover:text-white transition-colors"
                            (click)="clearcart()">
                        Clear
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

